# HEARTBEAT.md - Operation Alpha 心跳任务清单

## 每次心跳检查（每10分钟）

### 1. 检查定时任务状态
- 确认 `us-market-overview` (8:30) 任务正常
- 确认 `ah-market-preopen` (9:15) 任务正常
- 检查是否有任务运行失败

### 2. Git同步检查（整点任务）
**触发条件：分钟数为 00-09（整点）**

**执行步骤**：
1. 运行自动同步脚本：`bash tools/git_sync.sh`
2. 脚本会自动检测变更、提交并push
3. 查看日志确认同步状态：`tail -20 .git-sync.log`

**说明**：
- 所有 `.md` 文件变更会自动提交
- 如配置了远程仓库，会自动push
- 同步日志保存在 `.git-sync.log`

**首次使用需配置远程仓库**（可选）：
```bash
git remote add origin https://github.com/yourusername/openclaw-workspace.git
git push -u origin master
```

### 2. 环境就绪检查
- 检查 `.openclaw/workshop/data/` 目录可写
- 检查网络连接（Yahoo Finance、AKShare 等数据源）
- 检查 Python 环境（pandas, numpy, akshare, yfinance 等包）

### 3. 学习任务执行（立即开始）

#### 当前学习阶段：模块1 - 财报分析基础

**学习任务拆解（按小时规划）：**

| 时间 | 任务 | 产出物 | 状态 |
|------|------|--------|------|
| 第1小时 | 1.1 资产结构学习 | `01_balance_sheet_assets.md` | ✅ 完成 |
| 第2小时 | 1.2 负债分析学习 | `02_balance_sheet_liabilities.md` | ✅ 完成 |
| 第3小时 | 1.3 股东权益学习 | `03_balance_sheet_equity.md` | ✅ 完成 |
| 第3小时 | 1.3 股东权益学习 | `01_balance_sheet_equity.md` | 🔲 待开始 |
| 第4小时 | 1.4 关键比率学习 | `04_financial_ratios_solvency.md` | ✅ 完成 |
| 第5小时 | 2.1 收入分析学习 | `01_income_statement_revenue.md` | ✅ 完成 |
| 第6小时 | 2.2 成本分析学习 | `02_income_statement_cost.md` | ✅ 完成 |
| 第7小时 | 2.3 费用分析学习 | `03_income_statement_expenses.md` | ✅ 完成 |
| 第8小时 | 2.4 利润层级学习 | `04_income_statement_profit.md` | ✅ 完成 |
| 第9小时 | 3.1 经营现金流学习 | `01_cashflow_operations.md` | ✅ 完成 |
| 第10小时 | 3.2 投资筹资现金流学习 | `02_cashflow_investing_financing.md` | ✅ 完成 |
| 第11小时 | 3.3 现金流质量学习 | `03_cashflow_quality.md` | ✅ 完成 |
| 第12小时 | 4.1 杜邦分析法学习 | `01_dupont_analysis.md` | ✅ 完成 |
| 第13小时 | 4.2 估值模型学习 | `02_valuation_models.md` | ✅ 完成 |
| 第14小时 | 4.3 财务预警学习 | `03_financial_warning.md` | ✅ 完成 |
| 第15小时 | 5.1 行业生命周期学习 | `01_industry_lifecycle.md` | ✅ 完成 |
| 第16小时 | 5.2 产业链分析学习 | `02_industry_chain.md` | ✅ 完成 |
| 第17小时 | 5.3 行业比较学习 | `03_industry_comparison.md` | ✅ 完成 |
| 第18小时 | 6.1 K线技术学习 | `01_candlestick_patterns.md` | ✅ 完成 |
| 第19小时 | 6.2 量能分析学习 | `02_volume_analysis.md` | ✅ 完成 |
| 第20小时 | 6.3 技术指标学习 | `03_technical_indicators.md` | ✅ 完成 |
| 第21小时 | 6.4 量价关系学习 | `04_price_volume.md` | ✅ 完成 |

**学习执行规则：**
1. 每个心跳检查当前小时任务是否完成
2. 未完成则继续执行，完成后开始下一个任务
3. 每满1小时（整点）汇报上一个小时的工作结果

### 4. 每小时汇报机制

**触发条件：** 当前时间的分钟数为 00-09（即整点后10分钟内）

**汇报内容：**
```
[小时汇报] YYYY-MM-DD HH:00
- 上一个小时完成: [具体任务]
- 产出物: [文件路径]
- 学习要点: [3-5个核心要点]
- 下一个小时计划: [下一个任务]
```

### 5. 当日任务检查
- 如果当前时间 08:00-08:35：准备美股分析
- 如果当前时间 09:00-09:20：准备 A+H 分析
- 如果分析文件已生成：检查内容完整性

### 6. 学习进度追踪

**模块1：财报分析基础 ✅ 完成（4/4）**
- [x] 1.1 资产负债表 - 资产结构
- [x] 1.2 资产负债表 - 负债分析
- [x] 1.3 资产负债表 - 股东权益
- [x] 1.4 关键比率 - 偿债能力

**模块2：利润表分析 ✅ 完成（4/4）**
- [x] 2.1 利润表 - 收入分析
- [x] 2.2 利润表 - 成本分析
- [x] 2.3 利润表 - 费用分析
- [x] 2.4 利润表 - 利润层级

**模块3：现金流量表 ✅ 完成（3/3）**
- [x] 3.1 现金流量表 - 经营活动现金流
- [x] 3.2 现金流量表 - 投资与筹资活动
- [x] 3.3 现金流量表 - 现金流质量分析

**模块4：财务分析进阶 ✅ 完成（3/3）**
- [x] 4.1 杜邦分析法 - ROE拆解与驱动因素
- [x] 4.2 估值模型 - PE/PB/PS/DCF方法
- [x] 4.3 财务预警 - 舞弊识别与风险信号

**模块5：行业分析框架 ✅ 完成（3/3）**
- [x] 5.1 行业生命周期与竞争格局
- [x] 5.2 产业链分析与护城河评估
- [x] 5.3 行业比较与轮动逻辑

**模块6：技术分析与实盘指标 ✅ 完成（4/4）**
- [x] 6.1 K线技术 - 形态识别与趋势判断
- [x] 6.2 量能分析 - 成交量与筹码分布
- [x] 6.3 技术指标 - MACD/KDJ/RSI/布林带
- [x] 6.4 量价关系 - 背离识别与买卖点

**模块8：行业深度研究 ✅ 完成（6/6）**

#### 学习目标：系统掌握各板块产业链、竞争格局、投资逻辑

| 板块 | 学习内容 | 产出物 | 状态 |
|:-----|:---------|:-------|:----:|
| 8.1 AI/半导体 | 算力产业链、芯片设计/制造/设备、竞争格局 | `industry_ai_semiconductor.md` | ✅ 完成 |
| 8.2 新能源 | 光伏/风电/储能/锂电产业链、技术路线、周期位置 | `industry_new_energy.md` | ✅ 完成 |
| 8.3 消费医药 | 白酒/食品饮料/医药CXO/创新药、品牌护城河 | `industry_consumer_healthcare.md` | ✅ 完成 |
| 8.4 高端制造 | 机械/军工/汽车零部件、国产替代、出海逻辑 | `industry_advanced_manufacturing.md` | ✅ 完成 |
| 8.5 高股息 | 煤炭/电力/银行/公用事业、股息率分析、防御价值 | `industry_high_dividend.md` | ✅ 完成 |
| 8.6 周期资源 | 有色/化工/钢铁、供需分析、价格周期 | `industry_cyclical_resources.md` | ✅ 完成 |

**学习规则**：
1. 每个板块学习覆盖：产业链图谱、龙头公司、竞争格局、周期位置、投资逻辑
2. 结合最新财报数据，分析当前景气度
3. 记录到行业研究笔记，便于后续快速查询

**核心发现汇总**：
| 板块 | 当前景气度 | 投资优先级 | 核心标的 |
|:-----|:----------:|:----------:|:---------|
| AI/半导体 | 🟢 高景气 | ⭐⭐⭐⭐⭐ | 中际旭创、北方华创、海光信息 |
| 新能源 | 🟡 分化 | ⭐⭐⭐⭐ | 储能（阳光电源）、海风（东方电缆） |
| 消费医药 | 🟡 弱复苏 | ⭐⭐⭐ | 茅台（左侧）、创新药出海（百济） |
| 高端制造 | 🟢 景气 | ⭐⭐⭐⭐ | 拓普集团、三花智控（汽车零部件出海） |
| 高股息 | 🟢 防御 | ⭐⭐⭐⭐ | 中国神华、长江电力、工商银行 |
| 周期资源 | 🟡 分化 | ⭐⭐⭐ | 铜（观望）、石油（高股息） |

**模块7：实践验证阶段 ✅ 完成（2/2）**
- [x] 7.1 历史案例回测验证
  - 案例1：中际旭创（300308）2023年初
    - 结果：✅ 分析框架验证成功
    - 目标价90-100元达成（实际最高170元）
    - 改进点：技术变革期需求弹性估计不足
  - 案例2：隆基绿能（601012）2023年
    - 结果：✅ 看空逻辑完全正确
    - 目标价20-22元达成（实际跌至22元）
    - 改进点：周期下行期业绩弹性估计需更悲观
  - 案例3：贵州茅台（600519）2023年10月
    - 结果：⚠️ 部分正确
    - 基本面判断正确，但忽略了宏观+风格因素
    - 改进点：加强宏观环境和催化剂分析
  - 产出：
    - `study/backtest/case_001_中际旭创_2023.md`
    - `study/backtest/case_002_隆基绿能_2023.md`
    - `study/backtest/case_003_贵州茅台_2023.md`
- [x] 7.2 数据接口优化
  - ✅ 检查AKShare/Tushare接口稳定性（AKShare不稳定30%，腾讯/新浪可用95%）
  - ✅ 开发备用数据源（新浪/腾讯API）
  - ✅ 优化代码性能和实时性
  - 产出：`tools/stock_data_provider.py`（多数据源自动切换）

**已完成：**
- [x] P0环境搭建：akshare/yfinance/pandas-ta安装
- [x] P0数据获取：fetch_data.py工具开发
- [x] 模块1：资产负债表完整分析（4篇文档，21439字）
- [x] 模块2：利润表完整分析（4篇文档，约22000字）
- [x] 模块3：现金流量表完整分析（3篇文档，约16658字）
- [x] 模块4：财务分析进阶（3篇文档，约11500字）
- [x] 模块5：行业分析框架（3篇文档，约7500字）
- [x] 模块6：技术分析与实盘指标（4篇文档，约8000字）
- [x] SOP文档：股票分析标准操作程序
- [ ] 模块7：实践验证（待开始）

---

## 汇报规则

### 心跳检查（每10分钟）
每次被heartbeat唤醒时，**必须执行以下判断**：

1. **检查当前时间分钟数**
   - 如果分钟数为 **00**：执行【小时汇报】
   - 如果分钟数为 **01-09**：执行【小时汇报】（补报缓冲）
   - 如果分钟数为 **10-59**：回复 `HEARTBEAT_OK`

2. **汇报后记录**
   - 记录本次汇报的小时数，避免重复汇报同一小时

### 小时汇报格式
```
[小时汇报] YYYY-MM-DD HH:00
- 上一个小时完成: [任务名称]
- 产出物: [文件路径]
- 核心要点: [3-5个核心要点]
- 累计进度: [X篇文档，约XXX字]
- 下一个小时: [计划任务]
```

### 重复汇报防护
- 同一小时内只汇报一次
- 如果因网络延迟等原因错过00分，在01-09分内补报
- 超过10分钟未报，则视为该小时已跳过，不再补报

### 示例时间线
```
22:00 heartbeat唤醒 → 分钟=00 → 执行22点汇报
22:10 heartbeat唤醒 → 分钟=10 → 回复HEARTBEAT_OK
22:20 heartbeat唤醒 → 分钟=20 → 回复HEARTBEAT_OK
...
23:00 heartbeat唤醒 → 分钟=00 → 执行23点汇报
```
