# 策略优化器因子使用文档

## 📊 数据库可用因子 (共26个)

### 1. 动量因子 (stock_factors)
| 因子名 | 说明 | 方向 | 优化器使用状态 |
|--------|------|------|----------------|
| ret_20 | 20日收益率 | 正向 | ✅ v23已使用 |
| ret_60 | 60日收益率 | 正向 | ✅ v23已使用 |
| ret_120 | 120日收益率 | 正向 | ✅ v25新增 |
| mom_accel | 动量加速 | 正向 | ✅ v23已使用 |
| profit_mom | 收益动量 | 正向 | ✅ v25新增 |
| rel_strength | 相对强度 | 正向 | ✅ v25新增 |

### 2. 波动率因子
| 因子名 | 说明 | 方向 | 优化器使用状态 |
|--------|------|------|----------------|
| vol_20 | 20日波动率 | 负向 | ✅ v23已使用 |
| vol_ratio | 量比 | 负向 | ✅ v25新增 |
| vol_120 | 120日波动率 | 负向 | ✅ v25新增(防御因子) |
| downside_vol | 下行波动率 | 负向 | ✅ v25新增(防御因子) |
| max_drawdown_120 | 120日最大回撤 | 负向 | ✅ v25新增(防御因子) |

### 3. 趋势因子
| 因子名 | 说明 | 方向 | 优化器使用状态 |
|--------|------|------|----------------|
| price_pos_20 | 20日价格位置 | 正向 | ✅ v23已使用 |
| price_pos_60 | 60日价格位置 | 正向 | ✅ v25新增 |
| price_pos_high | 相对高点位置 | 正向 | ✅ v25新增 |
| ma_20 | 20日均线 | - | ✅ v25新增 |
| ma_60 | 60日均线 | - | ✅ v25新增 |

### 4. 资金因子
| 因子名 | 说明 | 方向 | 优化器使用状态 |
|--------|------|------|----------------|
| money_flow | 资金流向 | 正向 | ✅ v23已使用 |
| vol_ratio_amt | 金额量比 | 正向 | ✅ v25新增 |

### 5. 质量因子 (防御因子)
| 因子名 | 说明 | 方向 | 优化器使用状态 |
|--------|------|------|----------------|
| sharpe_like | 类夏普比率 | 正向 | ✅ v25新增 |
| low_vol_score | 低波动分数 | 正向 | ✅ v25新增 |

### 6. 估值因子 (财务)
| 因子名 | 说明 | 方向 | 优化器使用状态 |
|--------|------|------|----------------|
| pe_ttm | 市盈率TTM | 负向 | ✅ v25新增 |
| pb | 市净率 | 负向 | ✅ v25新增 |

### 7. 财务因子
| 因子名 | 说明 | 方向 | 优化器使用状态 |
|--------|------|------|----------------|
| roe | 净资产收益率 | 正向 | ✅ v25新增 |
| revenue_growth | 营收增长率 | 正向 | ✅ v25新增 |
| netprofit_growth | 净利润增长率 | 正向 | ✅ v25新增 |
| debt_ratio | 负债率 | 负向 | ✅ v25新增 |
| dividend_yield | 股息率 | 正向 | ✅ v25新增 |

---

## 📈 因子利用率演进

| 版本 | 使用因子数 | 总因子数 | 利用率 | 主要改进 |
|------|-----------|----------|--------|----------|
| v23 | 6 | 26 | 23.1% | 基础动量+波动率 |
| v25 | 26 | 26 | 100% | **全因子覆盖** |

---

## 🔍 因子分析功能

v25增强优化器新增功能：
1. **因子重要性分析** - 单独测试每个因子的预测能力
2. **自动权重优化** - 根据因子表现动态调整权重
3. **分类管理** - 按动量/波动率/趋势/资金/质量/估值/财务分类
4. **定期重评估** - heartbeat自动运行并汇报最优因子组合

---

## 📝 更新日志

**2026-02-25**
- 创建v25增强优化器，整合全部26个因子
- 添加因子重要性分析功能
- 更新文档记录所有可用因子
- 配置heartbeat自动汇报因子使用情况

